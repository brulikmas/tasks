(function(){"use strict";var t={6496:function(t,e,s){var a=s(144),n=s(3726),o=s(4643),i=s(3816),r=s(5255),c=s(7024),d=s(1819),l=s(192),T=s(9088),u=s(7894),k=s(2515),h=function(){var t=this,e=t._self._c;return e(n.Z,[e(d.Z,[e(u.Z,{staticStyle:{height:"100vh"}},[e(c.Z,{attrs:{"align-self":"center"}},[e(i.Z,[e(r.EB,[t._v("Список заданий")]),e(r.h7,[e(l.Z,{attrs:{persistent:"","max-width":"1000px"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(o.Z,{attrs:{icon:"",large:"",color:"green"},on:{click:function(e){return t.addTaskMethod()}}},[e(T.Z,[t._v("mdi-plus-box")])],1),e(o.Z,{attrs:{icon:"",large:"",disabled:!t.selectedItemTaskId},on:{click:function(e){return t.openEdit()}}},[e(T.Z,[t._v("mdi-pencil")])],1)]}}]),model:{value:t.flagDialog,callback:function(e){t.flagDialog=e},expression:"flagDialog"}},[e("Task",{key:t.updateKey})],1),e(l.Z,{attrs:{persistent:"","max-width":"350"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(o.Z,t._g(t._b({attrs:{icon:"",large:"",color:"red",disabled:!t.selectedItemTaskId}},"v-btn",a,!1),s),[e(T.Z,[t._v("mdi-delete-outline")])],1)]}}]),model:{value:t.cancelDialog,callback:function(e){t.cancelDialog=e},expression:"cancelDialog"}},[e(i.Z,[e(r.EB,{staticClass:"text-h5"},[t._v(" Вы действительно хотите "),e("br"),t._v(" удалить задание? ")]),e(r.ZB,[t._v(" Все данные будут безвозвратно удалены. ")]),e(r.h7,[e(k.Z),e(o.Z,{attrs:{text:""},on:{click:function(e){return t.deleteTaskMethod(t.selectedItemTaskId)}}},[t._v(" Да ")]),e(o.Z,{attrs:{text:""},on:{click:function(e){t.cancelDialog=!1}}},[t._v(" Нет ")])],1)],1)],1)],1),e(r.ZB,[e("TaskList")],1)],1)],1)],1)],1)],1)},g=[],m=s(2912),p=s(2379),f=function(){var t=this,e=t._self._c;return e(i.Z,[e(r.EB,[t._v(" Редактирование задания "),e(k.Z),e(r.h7,[e(l.Z,{attrs:{persistent:"","max-width":"450"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(o.Z,t._g(t._b({attrs:{icon:"",large:""}},"v-btn",a,!1),s),[e(T.Z,[t._v("mdi-close-circle-outline")])],1)]}}]),model:{value:t.cancelEditing,callback:function(e){t.cancelEditing=e},expression:"cancelEditing"}},[e(i.Z,[e(r.EB,{staticClass:"text-h5"},[t._v(" Вы действительно хотите закрыть окно редактирования? ")]),e(r.ZB,[t._v(" Все несохраненные данные будут потеряны. ")]),e(r.h7,[e(k.Z),e(o.Z,{attrs:{text:""},on:{click:function(e){return t.cancelEdit()}}},[t._v(" Да ")]),e(o.Z,{attrs:{text:""},on:{click:function(e){t.cancelEditing=!1}}},[t._v(" Нет ")])],1)],1)],1)],1)],1),e(r.ZB,[e(u.Z,[e(c.Z,{attrs:{cols:"12",sm:"2"}},[e(m.Z,{staticClass:"pa-0"},[t._v("Задание:")])],1),e(c.Z,{attrs:{cols:"12",sm:"9"}},[e(p.Z,{attrs:{outlined:"","no-resize":"",value:t.oneTask.name},on:{input:function(e){return t.changeTaskTitle(e)}}})],1)],1),e(r.h7,{staticClass:"py-0 pl-0"},[e(u.Z,[e(c.Z,{attrs:{cols:"4",sm:"2"}},[e(m.Z,{staticClass:"pa-0"},[t._v("Список задач:")])],1),e(c.Z,{staticClass:"pl-0"},[e(o.Z,{attrs:{icon:"",large:"",color:"green"},on:{click:function(e){return t.addToDoItem()}}},[e(T.Z,[t._v("mdi-plus-box")])],1),e(o.Z,{attrs:{icon:"",large:"",color:"red"},on:{click:function(e){return t.deleteToDoItem(t.selectedToDoId)}}},[e(T.Z,[t._v(" mdi-delete-outline ")])],1)],1)],1)],1),e(u.Z,{staticClass:"my-2",attrs:{justify:"center"}},[e(c.Z,{staticClass:"overflow-y-scroll overflow-x-hidden pr-sm-0 pr-4 py-2 my-2",staticStyle:{"max-height":"300px"},attrs:{cols:"10"}},t._l(t.oneTask.todoItems,(function(s,a){return e("CheckBox",{key:a,class:{"blue lighten-5":t.selectedToDoId===s.id},attrs:{title:s.text,doneToDo:s.done},on:{selectItemInput:function(e){t.selectedToDoId=s.id},taskDone:function(e){return t.changeToDoItemDone(s.id)},changeTitle:function(e){return t.changeToDoItemText(s.id,e)}}})})),1)],1),e(u.Z,{attrs:{justify:"center"}},[e(c.Z,{attrs:{cols:"12",sm:"10"}},[e(r.h7,{staticClass:"pr-0"},[e(k.Z),e(o.Z,{attrs:{icon:""},on:{click:function(e){return t.cancelLastChange()}}},[e(T.Z,[t._v(" mdi-undo-variant ")])],1),e(o.Z,{staticClass:"mr-3",attrs:{icon:""},on:{click:function(e){return t.repeatLastChange()}}},[e(T.Z,[t._v(" mdi-redo-variant ")])],1),e(o.Z,{staticClass:"white--text mr-3",attrs:{color:"green"},on:{click:function(e){return t.saveChanges(t.oneTask,t.oneTask.id)}}},[t._v(" Сохранить ")]),e(l.Z,{attrs:{persistent:"","max-width":"350"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(o.Z,t._g(t._b({},"v-btn",a,!1),s),[t._v(" Отмена ")])]}}]),model:{value:t.cancelDialog,callback:function(e){t.cancelDialog=e},expression:"cancelDialog"}},[e(i.Z,[e(r.EB,{staticClass:"text-h5"},[t._v(" Вы действительно хотите "),e("br"),t._v(" отменить изменения? ")]),e(r.ZB,[t._v(" Все несохраненные данные будут потеряны. ")]),e(r.h7,[e(k.Z),e(o.Z,{attrs:{text:""},on:{click:function(e){return t.cancelChanges()}}},[t._v(" Да ")]),e(o.Z,{attrs:{text:""},on:{click:function(e){t.cancelDialog=!1}}},[t._v(" Нет ")])],1)],1)],1)],1)],1)],1)],1)],1)},_=[],v=s(3748),D=s(3240),y=s(387),E=function(){var t=this,e=t._self._c;return e("div",{staticClass:"radius pt-2 pl-2",on:{click:function(e){return t.$emit("selectItemInput")}}},[e(D.Z,{attrs:{disabled:t.activated}},[e(u.Z,{staticClass:"mt-2",attrs:{justify:"center"}},[e(c.Z,{staticClass:"mr-md-3 mr-2",attrs:{cols:"1"}},[e(v.Z,{attrs:{"input-value":t.doneToDo,color:"success"},on:{change:function(e){return t.$emit("taskDone")}}})],1),e(c.Z,{staticClass:"pr-4 pb-0"},[e(y.Z,{attrs:{outlined:"",value:t.title,placeholder:"Введите задачу"},on:{input:function(e){return t.$emit("changeTitle",e)}}})],1)],1)],1)],1)},A=[],I={name:"CheckBox",props:{title:String,doneToDo:Boolean,activated:Boolean},data(){return{}},methods:{}},Z=I,S=s(1001),x=(0,S.Z)(Z,E,A,!1,null,"57cea2a7",null),C=x.exports,O=s(629),b=s(296),L=s.n(b),K={name:"Task",components:{CheckBox:C},data(){return{selectedToDoId:null,actionsArray:[],posForAdd:0,cancelDialog:!1,cancelEditing:!1,posForSave:1}},created(){this.changeActionsArray(),this.changeTaskTitle=L()(this.changeTaskTitle,400),this.changeToDoItemText=L()(this.changeToDoItemText,400)},mounted(){document.addEventListener("keydown",this.keyUpHandler)},destroyed(){document.removeEventListener("keydown",this.keyUpHandler)},computed:{...(0,O.Se)({oneTask:"oneTask/getTask"}),deleteCountElements(){let t=this.actionsArray.length,e=t-this.posForAdd;return e},currentTask(){let t={...this.actionsArray[this.posForAdd-1]};t.todoItems=[...t.todoItems];for(let e=0;e<t.todoItems.length;e++)t.todoItems[e]={...t.todoItems[e]};return t}},methods:{...(0,O.OI)({changeTask:"oneTask/CHANGE_TASK",changeTaskName:"oneTask/CHANGE_TASK_NAME",addToDo:"oneTask/ADD_TODO",deleteToDo:"oneTask/DELETE_TODO",changeDoneToDo:"oneTask/CHANGE_DONE_TODO",changeTextToDo:"oneTask/CHANGE_TEXT_TODO",changeFlagEdit:"tasksList/CHANGE_FLAG_EDIT"}),...(0,O.nv)({saveTask:"tasksList/saveTask"}),changeActionsArray(){let t={...this.oneTask};t.todoItems=[...t.todoItems];for(let e=0;e<t.todoItems.length;e++)t.todoItems[e]={...t.todoItems[e]};this.posForAdd===this.actionsArray.length?(this.posForAdd+=1,this.actionsArray.splice(this.posForAdd,this.deleteCountElements,t)):(this.actionsArray.splice(this.posForAdd,this.deleteCountElements,t),this.posForAdd+=1)},changeTaskTitle(t){this.changeTaskName(t),this.changeActionsArray()},changeToDoItemDone(t){this.changeDoneToDo(t),this.changeActionsArray()},deleteToDoItem(t){null!==t&&(this.deleteToDo(t),this.selectedToDoId=null,this.changeActionsArray())},addToDoItem(){this.addToDo(),this.changeActionsArray()},changeToDoItemText(t,e){this.changeTextToDo({id:t,text:e}),this.changeActionsArray()},cancelLastChange(){this.posForAdd>1&&(this.posForAdd-=1,this.changeTask(this.currentTask))},repeatLastChange(){this.posForAdd<this.actionsArray.length&&(this.posForAdd+=1,this.changeTask(this.currentTask))},keyUpHandler(t){!t.ctrlKey||"z"!==t.key&&"я"!==t.key?!t.ctrlKey||"y"!==t.key&&"н"!==t.key||(t.preventDefault(),this.repeatLastChange()):(t.preventDefault(),this.cancelLastChange())},saveChanges(t,e){this.posForSave=this.posForAdd,this.saveTask({savedTask:t,savedId:e})},cancelChanges(){this.actionsArray.splice(this.posForSave,this.actionsArray.length),this.posForAdd=this.posForSave,this.changeTask(this.currentTask),this.cancelDialog=!1},cancelEdit(){this.cancelChanges(),this.changeFlagEdit()}}},N=K,w=(0,S.Z)(N,f,_,!1,null,"5296314d",null),F=w.exports,G=s(3206),H=s(9444),P=function(){var t=this,e=t._self._c;return e(G.Z,{attrs:{"fixed-header":"",height:"600px"}},[e("thead",[e("tr",[e("th",{staticClass:"text-left"},[e("h2",[t._v("Задание")])]),e("th",{staticClass:"text-left"},[e("h2",[t._v("Задачи")])])])]),e("tbody",t._l(t.tasks,(function(s,a){return e("tr",{key:a,class:{"blue lighten-5":t.selectedTaskId===s.id},on:{click:function(e){return t.selectTask(s.id)}}},[e("td",[e("h3",[t._v(t._s(s.name))])]),e("td",[t._l(s.todoItems.slice(0,2),(function(t,s){return e("CheckBox",{key:t.id,attrs:{title:t.text,doneToDo:t.done,activated:!0}})})),s.todoItems.length>2?e(H.Z,{attrs:{bottom:"",color:"blue lighten-4"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:a}){return[e(o.Z,t._g(t._b({staticClass:"px-0",staticStyle:{"justify-content":"start"},attrs:{plain:""}},"v-btn",a,!1),s),[t._v(" ... ")])]}}],null,!0)},t._l(s.todoItems,(function(t,s){return e("CheckBox",{key:s,attrs:{title:t.text,doneToDo:t.done}})})),1):t._e()],2)])})),0)])},B=[],M={name:"TaskList",components:{CheckBox:C},data(){return{}},computed:{...(0,O.Se)({tasks:"tasksList/getTasks",selectedTaskId:"tasksList/getSelectedTaskId",oneTask:"tasksList/getOneTask"})},methods:{...(0,O.OI)({changeSelectedTaskId:"tasksList/CHANGE_SELECTED_TASK_ID",setOneTask:"oneTask/SET_ONETASK_FROM_TASKLIST"}),selectTask(t){t!==this.selectedTaskId&&(this.changeSelectedTaskId(t),this.setOneTask(this.oneTask))}}},j=M,$=(0,S.Z)(j,P,B,!1,null,"51f3d9d5",null),U=$.exports,J={name:"App",components:{Task:F,TaskList:U},data(){return{cancelDialog:!1}},computed:{...(0,O.Se)({tasks:"tasksList/getTasks",selectedItemTaskId:"tasksList/getSelectedTaskId",oneTask:"tasksList/getOneTask",flagDialog:"tasksList/getFlagEditDialog",updateKey:"tasksList/getUpdateKey"})},created(){this.loadTasks()},methods:{...(0,O.nv)({loadTasks:"tasksList/loadTasks",addTask:"tasksList/addNewTask",deleteTask:"tasksList/deleteTask"}),...(0,O.OI)({changeSelectedTaskId:"tasksList/CHANGE_SELECTED_TASK_ID",setOneTask:"oneTask/SET_ONETASK_FROM_TASKLIST",changeFlagEdit:"tasksList/CHANGE_FLAG_EDIT",changeUpdateKey:"tasksList/CHANGE_UPDATE_KEY"}),deleteTaskMethod(t){null!==t&&(this.deleteTask(t),this.cancelDialog=!1)},addTaskMethod(){let t=Date.now();this.addTask(t)},openEdit(){this.changeFlagEdit(),this.changeUpdateKey()}}},R=J,Y=(0,S.Z)(R,h,g,!1,null,null,null),q=Y.exports,z=s(154);a.ZP.use(z.Z);var Q=new z.Z({}),V=s(9289);const X=V.ZP`
  {
    todoTasks @client {
      id
      name
      todoItems {
        id
        text
        done
      }
    }
  }
`,W=V.ZP`
  mutation deleteTask($idTask: ID!) {
    deleteTask(idTask: $idTask) @client {
      id
      name
      todoItems {
        id
        text
        done
      }     
    }
  }
`,tt=V.ZP`
  mutation($idTask: ID!) {
    addTask(idTask: $idTask) @client {
        id
        name
        todoItems {
          id
          text
          done
        }     
    }
  }
`,et=V.ZP`
  mutation($task: Task!, $idTask: ID!) {
    saveTask(task: $task, idTask: $idTask) @client {
      id
      name
      todoItems {
        id 
        text
        done
      }
    }
  }
`;var st=s(6688);s(7658);const at=localStorage.getItem("storageTasks"),nt=[];if(null===at){const t={__typename:"Task",id:"1",name:"Задание 1",todoItems:[{__typename:"ToDo",id:"1",text:"",done:!1}]};nt.splice(0,1,t),localStorage.storageTasks=JSON.stringify(nt)}else{let t=JSON.parse(localStorage.storageTasks);nt.splice(0,1,...t)}const ot=V.ZP`
  type ToDo {
    id: ID!
    text: String!
    done: Boolean!
  }
  type Task {
    id: ID!
    name: String!
    todoItems: [ToDo]!
  }
  type Query {
    todoTasks: [Task]!
  }
  type Mutation {
    deleteTask(idTask: ID!): [Task]
    addTask(idTask: ID!): [Task]
    saveTask(task: Task!, idTask: ID!): [Task]
  }
`,it={Query:{todoTasks:()=>nt},Mutation:{deleteTask:(t,{idTask:e})=>{const s=nt.find((t=>t.id===e));return nt.splice(nt.indexOf(s),1),localStorage.storageTasks=JSON.stringify(nt),nt},addTask:(t,{idTask:e})=>{const s={__typename:"Task",id:e,name:"Введите задание",todoItems:[{__typename:"ToDo",id:Date.now(),text:"",done:!1}]};return nt.push(s),localStorage.storageTasks=JSON.stringify(nt),nt},saveTask:(t,{task:e,idTask:s})=>{const a=nt.find((t=>t.id===s));return nt.splice(nt.indexOf(a),1,e),localStorage.storageTasks=JSON.stringify(nt),nt}}};var rt=s(4291);const ct=new rt.h4;var dt=new st.ZP({cache:ct,typeDefs:ot,resolvers:it}),lt={namespaced:!0,state:{tasks:[],selectedTaskId:null,flagEditDialog:!1,updateKey:0},getters:{getTasks(t){return t.tasks},getFlagEditDialog(t){return t.flagEditDialog},getUpdateKey(t){return t.updateKey},getSelectedTaskId(t){return t.selectedTaskId},getOneTask(t){const e=t.tasks.find((e=>e.id===t.selectedTaskId));return e}},mutations:{LOAD_TASKS(t,e){t.tasks=e},ADD_TASK(t,e){t.tasks=e},DELETE_TASK(t,e){t.tasks=e,t.selectedTaskId=null},CHANGE_SELECTED_TASK_ID(t,e){t.selectedTaskId=e},SAVE_TASK(t,e){t.tasks=e},CHANGE_FLAG_EDIT(t){t.flagEditDialog=!t.flagEditDialog},CHANGE_UPDATE_KEY(t){t.updateKey++}},actions:{async loadTasks({commit:t}){try{const e=await dt.query({query:X});t("LOAD_TASKS",e.data.todoTasks)}catch(e){console.log(e)}},async addNewTask({commit:t,getters:e},s){try{const a=await dt.mutate({mutation:tt,variables:{idTask:s}});t("ADD_TASK",a.data.addTask),t("CHANGE_SELECTED_TASK_ID",s),t("oneTask/SET_ONETASK_FROM_TASKLIST",e.getOneTask,{root:!0}),t("CHANGE_FLAG_EDIT"),t("CHANGE_UPDATE_KEY")}catch(a){console.log(a)}},async deleteTask({commit:t},e){try{const s=await dt.mutate({mutation:W,variables:{idTask:e}});t("DELETE_TASK",s.data.deleteTask)}catch(s){console.log(s)}},async saveTask({commit:t},e){try{const s=await dt.mutate({mutation:et,variables:{task:e.savedTask,idTask:e.savedId}});t("SAVE_TASK",s.data.saveTask)}catch(s){console.log(s)}}}},Tt=(s(2801),s(1295),{namespaced:!0,state:{oneTask:{}},getters:{getTask(t){return t.oneTask}},mutations:{SET_ONETASK_FROM_TASKLIST(t,e){t.oneTask=structuredClone(e)},CHANGE_TASK(t,e){t.oneTask=e},CHANGE_TASK_NAME(t,e){t.oneTask.name=e},ADD_TODO(t){const e={__typename:"Item",id:Date.now(),text:"",done:!1};t.oneTask.todoItems.push(e)},DELETE_TODO(t,e){const s=t.oneTask.todoItems,a=s.find((t=>t.id===e));s.splice(s.indexOf(a),1)},CHANGE_DONE_TODO(t,e){const s=t.oneTask.todoItems,a=s.find((t=>t.id===e));a.done=!a.done},CHANGE_TEXT_TODO(t,e){const s=t.oneTask.todoItems,a=s.find((t=>t.id===e.id));a.text=e.text}}});a.ZP.use(O.ZP);var ut=new O.ZP.Store({modules:{tasksList:lt,oneTask:Tt}});a.ZP.prototype.$apollo=dt,new a.ZP({render:t=>t(q),vuetify:Q,store:ut}).$mount("#app")}},e={};function s(a){var n=e[a];if(void 0!==n)return n.exports;var o=e[a]={id:a,loaded:!1,exports:{}};return t[a](o,o.exports,s),o.loaded=!0,o.exports}s.m=t,function(){var t=[];s.O=function(e,a,n,o){if(!a){var i=1/0;for(l=0;l<t.length;l++){a=t[l][0],n=t[l][1],o=t[l][2];for(var r=!0,c=0;c<a.length;c++)(!1&o||i>=o)&&Object.keys(s.O).every((function(t){return s.O[t](a[c])}))?a.splice(c--,1):(r=!1,o<i&&(i=o));if(r){t.splice(l--,1);var d=n();void 0!==d&&(e=d)}}return e}o=o||0;for(var l=t.length;l>0&&t[l-1][2]>o;l--)t[l]=t[l-1];t[l]=[a,n,o]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.hmd=function(t){return t=Object.create(t),t.children||(t.children=[]),Object.defineProperty(t,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+t.id)}}),t}}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var n,o,i=a[0],r=a[1],c=a[2],d=0;if(i.some((function(e){return 0!==t[e]}))){for(n in r)s.o(r,n)&&(s.m[n]=r[n]);if(c)var l=c(s)}for(e&&e(a);d<i.length;d++)o=i[d],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(l)},a=self["webpackChunknotes"]=self["webpackChunknotes"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(6496)}));a=s.O(a)})();
//# sourceMappingURL=app.b2eec121.js.map